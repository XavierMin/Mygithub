### Python

Python是一种计算机编程语言。计算机编程语言和我们日常使用的自然语言有所不同，最大的区别就是，自然语言在不同的语境下有不同的理解，而计算机要根据编程语言执行任务，就必须保证编程语言写出的程序决不能有歧义，所以，任何一种编程语言都有自己的一套语法，编译器或者解释器就是负责把符合语法的程序代码转换成CPU能够执行的机器码，然后执行。Python也不例外。

<!--more-->

> 注意：
>
> 1. 以`#`开头的语句是注释。
> 2. Python程序是**大小写敏感**的，大小写写错了程序会报错。
> 3. 按照惯例，缩进是**4个空格**。

### 1. 数据类型和变量

#### 1.1 整数

Python可以处理任意大小的整数，当然包括负整数，在程序中的表示方法和数学上的写法一模一样，例如：`1`，`100`，`-8080`，`0`，等等。对于很大的数，例如`10000000000`，很难数清楚0的个数。Python允许在数字中间以`_`分隔，因此，写成`10_000_000_000`和`10000000000`是完全一样的。十六进制数也可以写成`0xa1b2_c3d4`。

#### 1.2 浮点数

浮点数也就是小数，浮点数可以用数学写法，如`1.23`，`3.14`，`-9.01`，等等。但是对于很大或很小的浮点数，就必须用科学计数法表示，把10用e替代，1.23x109就是`1.23e9`，或者`12.3e8`，0.000012可以写成`1.2e-5`，等等。

#### 1.3 字符串

字符串是以单引号`'`或双引号`"`括起来的任意文本，比如`'abc'`，`"xyz"`等等。如果`'`本身也是一个字符，那就可以用`""`括起来，比如`"I'm OK"`包含的字符是`I`，`'`，`m`，空格，`O`，`K`这6个字符。

#### 1.4 空值

空值是Python里一个特殊的值，用`None`表示。`None`不能理解为`0`，因为`0`是有意义的，而`None`是一个特殊的空值。

#### 1.5 变量

在计算机程序中，变量不仅可以是数字，还可以是任意数据类型。变量名必须是大小写英文、数字和`_`的组合，且不能用数字开头。

### 2. 字符串和编码

由于计算机是美国人发明的，因此，最早只有127个字符被编码到计算机里，也就是大小写英文字母、数字和一些符号，这个编码表被称为`ASCII`编码，但是要处理中文显然一个字节是不够的，至少需要两个字节，而且还不能和ASCII编码冲突，所以，中国制定了`GB2312`编码，用来把中文编进去，其他国家语言又有其他标准，就会不可避免地出现冲突，因此，**Unicode字符集**应运而生。Unicode把所有语言都统一到一套编码里，这样就不会再有乱码问题了。

#### 2.1 Python的字符串

对于单个字符的编码，Python提供了`ord()`函数获取字符的整数表示，`chr()`函数把编码转换为对应的字符：

```python
>>> ord('A')
65
>>> ord('中')
20013
>>> chr(66)
'B'
>>> chr(25991)
'文'
```

由于Python的字符串类型是`str`，在内存中以Unicode表示，一个字符对应若干个字节。如果要在网络上传输，或者保存到磁盘上，就需要把`str`变为以字节为单位的`bytes`。Python对`bytes`类型的数据用带`b`前缀的单引号或双引号表示：`x = b'ABC'`

以Unicode表示的`str`通过`encode()`方法可以编码为指定的`bytes`，例如：

```python
>>> 'ABC'.encode('ascii')
b'ABC'
>>> '中文'.encode('utf-8')
b'\xe4\xb8\xad\xe6\x96\x87'
```

反过来，如果我们从网络或磁盘上读取了字节流，那么读到的数据就是`bytes`。要把`bytes`变为`str`，就需要用`decode()`方法：

```python
>>> b'ABC'.decode('ascii')
'ABC'
>>> b'\xe4\xb8\xad\xe6\x96\x87'.decode('utf-8')
'中文'
```

要计算`str`包含多少个字符，可以用`len()`函数：

```python
>>> len('ABC')
3
>>> len('中文')
2
```

`len()`函数计算的是`str`的字符数，如果换成`bytes`，`len()`函数就计算字节数：

```python
>>> len(b'ABC')
3
>>> len(b'\xe4\xb8\xad\xe6\x96\x87')
6
>>> len('中文'.encode('utf-8'))
6
```

由于Python源代码也是一个文本文件，所以，当你的源代码中**包含中文**的时候，在保存源代码时，就需要务必指定保存为UTF-8编码。当Python解释器读取源代码时，为了让它按UTF-8编码读取，通常在文件开头写上这两行：

```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
```

#### 2.2 格式化

在Python中，采用的格式化方式和C语言是一致的，用`%`实现，举例如下：

```python
>>> 'Hello, %s' % 'world'
'Hello, world'
>>> 'Hi, %s, you have $%d.' % ('Michael', 1000000)
'Hi, Michael, you have $1000000.'
```

常见的占位符有：

| 占位符 |   替换内容   |
| :----: | :----------: |
|   %d   |     整数     |
|   %f   |    浮点数    |
|   %s   |    字符串    |
|   %x   | 十六进制整数 |

另一种格式化字符串的方法是使用字符串的`format()`方法，它会用传入的参数依次替换字符串内的占位符`{0}`、`{1}`……，不过这种方式写起来比%要麻烦得多：

```python
>>> 'Hello, {0}, 成绩提升了 {1:.1f}%'.format('小明', 17.125)
'Hello, 小明, 成绩提升了 17.1%'
```

最后一种格式化字符串的方法是使用以`f`开头的字符串，称之为`f-string`，它和普通字符串不同之处在于，字符串如果包含`{xxx}`，就会以对应的变量替换：

```python
>>> r = 2.5
>>> s = 3.14 * r ** 2
>>> print(f'The area of a circle with radius {r} is {s:.2f}')
The area of a circle with radius 2.5 is 19.62
```

上述代码中，`{r}`被变量`r`的值替换，`{s:.2f}`被变量`s`的值替换，并且`:`后面的`.2f`指定了格式化参数（即保留两位小数），因此，`{s:.2f}`的替换结果是`19.62`。

### 3. list和tuple

#### 3.1 list

Python内置的一种数据类型是列表：list。list是一种有序的集合，可以随时添加和删除其中的元素。例：

```python
>>> language = ['C', 'C++', 'Python']
>>> language
['C', 'C++', 'Python']
```

变量`language`就是一个list。用`len()`函数可以获得list元素的个数。

用索引来访问list中每一个位置的元素，记得索引是从`0`开始的：

```python
>>> language[0]
'C'
>>> language[1]
'C++'
>>> language[2]
'Python'
```

如果要取最后一个元素，除了计算索引位置外，可以用`-1`做索引，直接获取最后一个元素：`classmates[-1]`

list是一个可变的有序表，所以，可以往list中追加元素到末尾：

```python
>>> language.append('Java')
>>> language
['C', 'C++', 'Python', 'Java']
```

也可以把元素插入到指定的位置，比如索引号为`1`的位置：

```python
>>> language.insert(1, 'Verilog')
>>> language
['C', 'Verilog', 'C++', 'Python', 'Java']
```

要删除list末尾的元素，用`pop()`方法。

要删除指定位置的元素，用`pop(i)`方法，其中`i`是索引位置。

要把某个元素替换成别的元素，可以直接赋值给对应的索引位置。

#### 3.2 tuple

另一种有序列表叫元组：**tuple**。tuple和list非常类似，但是tuple一旦初始化就不能修改。当定义一个tuple时，在定义的时候，tuple的元素就必须被确定下来。没有append()，insert()这样的方法。其他获取元素的方法和list是一样的。

如果要定义一个空的tuple，可以写成`t=()`，只有1个元素的tuple定义时必须加一个逗号`,`写成`t=(1，)`。

### 4. 流程控制

#### 4.1 条件判断

if的判断条件后要加`:`。

`elif`是`else if`的缩写，完全可以有多个`elif`，所以`if`语句的完整形式就是：

```python
if <条件判断1>:
    <执行1>
elif <条件判断2>:
    <执行2>
elif <条件判断3>:
    <执行3>
else:
    <执行4>
```

#### 4.2 循环

##### 4.2.1 for...in

Python的循环有两种，一种是**for...in**循环，依次把list或tuple中的每个元素迭代出来，看例子：

```python
languages = ['C', 'C++', 'Python']
for language in languages:
    print(language)
```

执行这段代码，会依次打印`languages`的每一个元素：

```python
C
C++
Python
```

所以`for x in ...`循环就是把每个元素代入变量`x`，然后执行缩进块的语句。

再比如我们想计算1-10的整数之和，可以用一个`sum`变量做累加：

```python
sum = 0
for x in [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]:
    sum = sum + x
print(sum)
```

如果要计算1-100的整数之和，从1写到100有点困难，幸好Python提供一个`range()`函数，可以生成一个整数序列，再通过`list()`函数可以转换为list。比如`range(5)`生成的序列是从0开始小于5的整数：

```python
>>> list(range(5))
[0, 1, 2, 3, 4]
```

##### 4.2.2 while

第二种循环是**while**循环，只要条件满足，就不断循环，条件不满足时退出循环。比如我们要计算100以内所有奇数之和，可以用while循环实现：

```python
sum = 0
n = 99
while n > 0:
    sum = sum + n
    n = n - 2
print(sum)
```

在循环内部变量`n`不断自减，直到变为`-1`时，不再满足while条件，循环退出。

##### 4.2.3 break

在循环中，`break`语句可以提前退出循环。

##### 4.2.4 continue

在循环过程中，也可以通过`continue`语句，跳过当前的这次循环，直接开始下一次循环。

例如打印1~10的奇数：

```python
n = 0
while n < 10:
    n = n + 1
    if n % 2 == 0: # 如果n是偶数，执行continue语句
        continue # continue语句会直接继续下一轮循环，后续的print()语句不会执行
    print(n)
```

执行上面的代码可以看到，打印的不再是1～10，而是1，3，5，7，9。

可见`continue`的作用是提前结束本轮循环，并直接开始下一轮循环。

### 5. dict和set

#### 5.1 dict

Python内置了字典：dict的支持，dict全称dictionary，在其他语言中也称为map，使用键-值（key-value）存储，具有极快的查找速度。例：

```python
>>> d = {'Michael': 95, 'Bob': 75, 'Tracy': 85}
>>> d['Michael']
95
```

把数据放入dict的方法，除了初始化时指定外，还可以通过key放入：

```python
>>> d['Adam'] = 67
>>> d['Adam']
67
```

由于一个key只能对应一个value，所以，多次对一个key放入value，后面的值会把前面的值覆盖掉，如果key不存在，dict就会报错。要删除一个key，用`pop(key)`方法，对应的value也会从dict中删除：

```python
>>> d.pop('Bob')
75
>>> d
{'Michael': 95, 'Tracy': 85}
```

dict内部存放的顺序和key放入的顺序是没有关系的。

和list比较，dict有以下几个特点：

> 1. 查找和插入的速度极快，不会随着key的增加而变慢；
> 2. 需要占用大量的内存，内存浪费多。

#### 5.2 set

set和dict类似，也是一组key的集合，但不存储value。由于key不能重复，所以，在set中，没有重复的key。

要创建一个set，需要提供一个list作为输入集合：

```python
>>> s = set([1, 2, 3])
>>> s
{1, 2, 3}
```

传入的参数`[1, 2, 3]`是一个list，而显示的`{1, 2, 3}`只是告诉你这个set内部有1，2，3这3个元素，重复元素在set中自动被过滤，显示的顺序也不表示set是有序的。

通过`add(key)`方法可以添加元素到set中，可以重复添加，但没有效果，通过`remove(key)`方法可以删除元素。set可以看成数学意义上的无序和无重复元素的集合，因此，两个set可以做数学意义上的交集、并集等操作。